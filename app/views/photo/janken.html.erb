<%= javascript_pack_tag "marron.js" %>

<script>
function rsp(playerSelect) {
    let result;
    let playerSelectHand;
    let comSelectHand;
    let resultString;
    let random = Math.random();
    let comSelect = Math.floor(random * 3);
    console.log(comSelect);
    console.log(playerSelect);

    if (playerSelect == comSelect) {
        result = 2;
    } else {
        if (playerSelect == 0) {
            if (comSelect == 1) {
                result = 1;
            } else {
                result = 0;
            }
        } else if (playerSelect == 1) {
            if (comSelect == 0) {
                result = 0;
            } else {
                result = 1;
            }
        } else {
            if (comSelect == 0) {
                result = 1;
            } else {
                result = 0;
            }
        }
    }
    console.log(result);

    if (playerSelect == 0) {
        playerSelectHand = 'グー✊';
    } else if (playerSelect == 1) {
        playerSelectHand = 'チョキ✌';
    } else {
        playerSelectHand = 'パー✋';
    }

    if (comSelect == 0) {
        comSelectHand = 'グー✊';
    } else if (comSelect == 1) {
        comSelectHand = 'チョキ✌';
    } else {
        comSelectHand = 'パー✋';
    }

    if (result == 0) {
        resultString = 'ざんね〜ん!!ぼくのかち〜!🐾';
    } else if (result == 1) {
        resultString = 'おめでとう🎉きみのかち🏆✨';
    } else {
        resultString = 'ひきわけ〜🐾あいこで......';
    }

    document.getElementById('player').innerHTML = 'きみは ' + playerSelectHand + 'だね!';
    document.getElementById('computer').innerHTML = 'ぼくは ' + comSelectHand + 'をだしたよ🐾';
    document.getElementById('resultMsg').innerHTML = resultString;
}

</script>

<div class="main photo-janken">
  <div class="container">
    <div class="jankenmain">
      <h1>マロンとジャンケン!</h1>
      <div class="jankenpc">
        <h3>さいしょはグー...じゃ〜んけ〜ん......</h3>
      </div>
      <div class="jankensp">
        <h3>さいしょはグー......</h3>
        <h3>じゃ〜んけ〜ん........</h3>
      </div>
      <p>↓えらんでクリック!!</p>
        <div class="player-hand">
          <div class="btn" onclick="rsp(0);">グー✊</div>
          <div class="btn" onclick="rsp(1);">チョキ✌</div>
          <div class="btn" onclick="rsp(2);">パー✋</div>
        </div>
    </div>

    <div class="all-modal">
      <div class="modal">
        <div>
          <h3 id="player"></h3>
          <h3 id="computer"></h3>
          <h2 id="resultMsg"></h2>
        </div>
        <%= link_to("▶さぁ、もういちどチャレンジ!","/photo/janken") %>
      </div>
    </div>
    
  </div>
</div>
